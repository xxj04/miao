<!DOCTYPE html>
<html lang="en" style="width: 100%;height: 100%;">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>

  <title>Document</title>
</head>

<body style="width: 100%;height: 100%;">
  <input type="button" onclick="run()" style="width: 100px;height: 100px; font-size: 40px;" value="run"></input>
  <input type="button" onclick="run2()" style="width: 100px;height: 100px; font-size: 40px;" value="run2"></input>
  <script>
    function run() {
      downloadImgSync('https://xieranmaya.github.io/images/cats/cats.json', (e) => {
        var list = JSON.parse(e.responseText)
        for (var x of list) {
          downloadImgSync(x.fullUrl, (e) => {

            var img = new Image
            img.src = e.responseURL


          })
        }
      })



    }

    function run2(value = 3) {
      downloadImgSync('https://xieranmaya.github.io/images/cats/cats.json', (e) => {
        var list = JSON.parse(e.responseText)
        for (var i = 0; i < list.length; i = i + value) {
          var a = value
          var ii = i
          while (a) {
            downloadIm(list[ii].fullUrl, (e) => {

              var img = new Image
              img.src = e.responseURL
            })
            a--
            ii++
          }
        }


      })



    }
    function downloadIm(url, callback) {
      var rep = new XMLHttpRequest();
      rep.open('GET', url, true);
      rep.addEventListener('load', function () {
        callback(rep)
      })
      rep.send();
    }

    function downloadImgSync(url, callback) {
      var xhr = new XMLHttpRequest()
      xhr.open('get', url, false)
      xhr.send()
      callback(xhr)

    }
  </script>

</body>

</html>